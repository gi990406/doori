{% extends "base.html" %}
{% load static %}
{% block content %}
  <td width="800" valign="top">
    <!--타이틀시작-->
    <div id="notice-title" aria-label="페이지 타이틀">
      <!-- 가운데 타이틀 이미지 -->
      <div class="title">
        <img src="{% static 'images/notice/notice_title.png' %}" alt="공지사항">
      </div>
    </div>
    <!--/ 타이틀시작-->
    <!-- 게시판 목록 시작 -->
    <div id="notice-board">
      <table>
        <thead>
          <tr>
            <th>번호</th>
            <th>제목</th>
            <th>작성일</th>
            <!-- ✅ 오른쪽 정렬 -->
          </tr>
        </thead>
        <tbody>
          {% for notice in notices %}
            <tr>
              <td class="num">{{ notice.id }}</td>
              <td class="subject">
                <a class="ellipsis" href="{% url 'community:notice_detail' notice.id %}">{{ notice.title }}</a>
              </td>
              <td class="datetime">{{ notice.created_at|date:"Y-m-d" }}</td>
              <!-- ✅ 오른쪽 정렬은 colgroup/CSS로 적용 -->
            </tr>
          {% empty %}
            <tr>
              <td colspan="3" style="text-align:center; padding:40px 0; color:#6b7280;">등록된 공지가 없습니다.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <!-- 게시판 목록 끝 -->
    {% if is_paginated %}
      <form class="pager-wrap" method="get" role="navigation" aria-label="페이지네이션">
        {# 다른 GET 파라미터 보존(page 제외) #}
        {% for k, v in request.GET.items %}
          {% if k != 'page' %}<input type="hidden" name="{{ k }}" value="{{ v }}">{% endif %}
        {% endfor %}
        <div class="pager">
          {# 숫자들 (뷰에서 page_range 제공 권장; 없으면 paginator.page_range 사용) #}
          {% for num in page_range|default:paginator.page_range %}
            {% if num == page_obj.number %}
              <button type="button" class="num" aria-current="page">{{ num }}</button>
            {% else %}
              <button type="submit" class="num" name="page" value="{{ num }}">{{ num }}</button>
            {% endif %}
          {% endfor %}
          <span class="vsep" aria-hidden="true"></span>
          {# › 다음 #}
          {% if page_obj.has_next %}
            <button type="submit"
                    class="arrow"
                    name="page"
                    value="{{ page_obj.next_page_number }}">›</button>
          {% else %}
            <button type="button" class="arrow" disabled>›</button>
          {% endif %}
          {# » 맨끝 #}
          {% if page_obj.has_next %}
            <button type="submit"
                    class="arrow"
                    name="page"
                    value="{{ paginator.num_pages }}">»</button>
          {% else %}
            <button type="button" class="arrow" disabled>»</button>
          {% endif %}
        </div>
      </form>
    {% endif %}
  </td>
{% endblock content %}
